## 2.2 프론트엔드 테스트의 범위

프론트엔드 테스트의 범위를 좀 더 자세히 살펴보자

### 1. 정적 분석

**타입스크립트를 활용하는 정적분석**은 버그를 조기에 발견할 수 있도록 한다

=> **타입 추론은 런타임 작동을 예측**해주기 때문에 아주 유용

```typescript
function getMessage(name: string | undefined) {
  const a = name; // a: string | undefined
  if (!name) {
    return "Hello anonymous!";
  }
  // if문 분기와 return 으로 undefined 으로 판정
  const b = name; // b: string
  return `Hello ${name}~`;
}
```

함수의 반환값이 생각한 타입과 일치하는 지 검증할 때도 도움이 된다

반환이 undefined 가 되지 않도록 함수 블록 마지막에 예외를 발생시킴으로써 **반환 타입이 반드시 string이 되는 타입 추론이 가능**

```typescript
function checkType(type: "A" | "B" | "C"): string {
  const message: string = "valid type";
  if (type === "A") {
    return message;
  }
  if (type === "B") {
    return message;
  }

  // 예외 발생 처리 유무에 따라 함수의 반환 타입 추론이 바뀐다.
  // throw new Error("invalid type")
}
```

반환 타입 추론은 string | undefined 이므로 일치하지 않아 타입 오류 발생

</br>

**코드 가이드 라인을 제공하는 ESLint** 또한 정적 분석 도구 중 하나이다

ESLint는 부적절한 구문을 수정해서 잠재적으로 발생할 수 있는 버그를 사전에 방지

### 2. 단위 테스트

단위 테스트는 테스트할 모듈이 특정 입력값을 받아 기대하는 출력값을 반환하는 지 테스트

모듈에 따라서 **거의 발생하지 않는 케이스(코너 케이스)에 한해서만 예외를 발생**시키는 것이 나을 수 있다

=> 단위테스트는 **어떤 상황에서 예외를 발생시켜야 할지 판단**할 때 도움이 된다

### 3. 통합 테스트

통합 테스트는 **여러 모듈을 연동한 기능을 테스트**

1. select 박스를 조작
2. url 검색 쿼리가 변경된다
3. 검색 쿼리가 변경되어 데이터 취득 api 가 호출
4. 목록 화면내용을 갱신

1 ~ 4 까지 실행되는 넓은 범위의 통합 테스트

코너 테스트 때문에 테스트가 복잡해지면 범위를 좁혀서 통합 테스트를 실시해야 테스트 목적이 명확해진다

### 4. E2E 테스트

E2E 테스트는 **UI 테스트 뿐만 아니라 외부 스토리지와 같은 연동 중인 하위 시스템을 포함하는 테스트**

=> UI는 물론 연동된 외부 기능이 정상적으로 작동하는 지 검증할 수 있다

## 2.3 프론트엔드 테스트의 목적

### 1. 기능 테스트(인터랙션 테스트)

개발 대상은 사용자가 조작할 UI 컴포넌트

=> UI 컴포넌트는 사용자가 조작하면 상태를 변경하고, 사용자가 원하는 정보를 제공하기 위해 화면을 갱신

실제 브라우저를 헤드리스 모드로 실행하여 UI 테스트 자동화를 실시하는 것이 아닌 **브라우저 없이도 테스트할 수 있는 가상 브라우저 환경이 존재**

- 버튼을 클릭하면 콜백 함수가 호출된다
- 문자를 입력하면 전송 버튼이 활성화 된다
- 로그아웃 버튼을 클릭하면 로그인 화면으로 이동한다

단, 가상 브라우저만으로 스크롤이나 세션 스토리지 같은 기능은 테스트할 수 X

실제 브라우저가 없으면 수행하기 어려운 기능의 테스트는 헤드리스 브라우저와 UI 자동화 도구를 사용

- 맨 아래 까지 스크롤을 내리면 추가 데이터를 가져온다
- 세션 스토리지에 저장된 값을 불러온다

### 2. 비기능 테스트(접근성 테스트)

키보드 만으로 웹 사이트를 이용할 수 있는가, 명암비가 시인성에 문제는 없는가 와 같은 다양한 검증 항목이 존재

=> 검증할 때는 검증 항목에 알맞은 적절한 테스트 도구를 사용

**접근성 테스트 실제 사례**

- 체크 박스를 체크할 수 있다
- 오류 응답을 받았을 때 오류 문구를 렌더링
- 렌더링된 화면에 접근성 위반 사례가 있는 지 검사

### 3. 시각적 회귀 테스트

CSS는 UI 컴포넌트에 정의된 스타일 뿐 아니라 브라우저에 적용된 모든 스타일의 영향을 받는다

시각적 회귀 테스트는 헤드리스 **브라우저에 그려진 내용을 캡쳐하여 캡쳐된 이미지간 차이를 검증**

**시각적 회귀 테스트 실제 사례**

- 버튼 스타일에 차이가 없다
- 메뉴바 를 열었을 때 화면에 차이가 없다
- 렌더링된 화면에 차이가 없다
