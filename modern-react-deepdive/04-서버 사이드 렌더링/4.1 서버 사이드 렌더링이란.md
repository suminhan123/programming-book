# 4.1 서버 사이드 렌더링이란?

## 4.1.1 싱글 페이지 애플리케이션의 세상

### 싱글 페이지 애플리케이션이란?

렌더링과 라우팅에 필요한 대부분의 기능을 서버가 아닌 브라우저의 자바스크립트에 의존하는 방식
=> 페이지를 불러온 이후에는 서버에서 HTML을 내려받지 않고 하나의 페이지에서 모든 작업을 처리

실제 소스 보기로 HTML 코드를 봤을 때 `<body />`에 아무내용이 X
=> 사이트 렌더링에 필요한 `<body />` 내부의 내용을 모두 자바스크립트 코드로 삽입한 이후에 렌더링

=> 페이지 전환 시에도 새로운 HTML 페이지를 요청하는 게 아닌 자바스크립트에서 다음 페이지의 렌더링에 필요한 HTTP 요청 등으로 가져옴

=> 그 결과를 바탕으로 `<body />` 내부에 DOM을 추가, 수정, 삭제하는 방법으로 페이지가 전환

**최초에 서버에서 최소한의 데이터를 불러온 이후부터는 이미 가지고 있는 자바스크립트 리소스와 브라우저 API를 기반으로 모든 작동**이 이뤄진다

단점

- 최초에 로딩해야 할 자바스크립트 리소스가 큼

장점

- 한번 로딩된 이후에는 서버를 거쳐 필요한 리소스를 받아올 일이 적어 좋은 사용자 경험 제공

### 전통적인 방식의 애플리케이션과 싱글 페이지 애플리케이션의 작동비교

**과거 서버 사이드에서 작동하던 전통적인 방식의 애플리케이션의 경우**

페이지 전환이 발생할 때마다 새롭게 페이지를 요청하고, HTML페이지를 다운로드해 파싱하는 작업(처음부터 다시 다운로드받고 렌더링하는 작업)

단점

- 페이지를 처음부터 새로 그려야 해 부자연스러운 모습

**싱글 페이지 애플리케이션의 경우**

장점

- **페이지 전환을 모두 자바스크립트로 해서**, 최초에 한번 모든 리소스를 다운로드하고 전환할 때 추가로 리소스를 다운로드하는 시간이 필요 X

- 모든 페이지를 새로 렌더링 X, 페이지 전환에 필요한 일부 영역만 다시 렌더링

### 싱글 페이지 렌더링 방식의 유행과 JAM 스택의 등장

많은 웹 페이지들이 싱글 페이지 렌더링 방식을 채택

**과거 PHP, JSP(JavaServer Pages)를 기반의 웹페이지**

거의 대부분의 렌더링이 서버 사이드
(페이지를 요청하면 서버에서 완성된 HTML을 내려받고, 페이지 이동이 있으면 새로운 페이지를 서버에서 내려 받는 방식)
=> 여기서 자바스크립트는 보조적인 수단으로 사용
<br />

-> 자바스크립트가 서서히 다양한 작업을 수행
-> 자바스크립트를 모듈화하는 방안이 점차 논의
**CommonJS와 AMD가 등장**

<br />
Backbone.js 와 AngularJS, Knockout.js 등이 등장하면서 자바스크립트 수준에서 MVx 프레임워크를 구현하기 시작

-> 자바스크립트에서 어느 정도 서버에서만 할 수 있는 작업들도 수행
-> **자바스크립트의 역할과 규모가 점점 커짐**
-> 자바스크립트의 역할이 더욱 가중

<br />

**React, Vue, Angular가 등장**
-> 웹 애플리케이션이 자바스크립트의 역할에 크게 의존하게 됨
-> 웹 페이지의 모든 영역, 페이지의 렌더링에서 부터 사용자의 인터렉션에 이르기 까지 담당하는 **싱글 페이지 렌더링이 큰 인기를 얻게됨**
-> 단지 브라우저 내부에서 작성하는 자바스크립트만 잘 작성하면도기에 좀더 간편한 개발 경험을 제공

<br />

-> 자바스크립트에서 할 수 있는 일이 제한적이었기에 대부분의 처리를 서버에서 하는 서버 의존적 문제로 부터 과거 LAMP 스택은 매우 인기 있는 웹 개발 구조
-> 웹 애플리케이션의 확장성에도 걸림돌로 작용
**싱글 페이지 애플리케이션의 유행으로 JAM 스택이 등장**
-> 대부분의 작업을 자바스크립트에서 수행

자바스크립트와 마크업(HTML, CSS)미리 빌드해두고 정적으로 사용자에게 제공하며 이후 작동은 모두 사용자의 클라이언트에서 실행

<br />

-> JAM 스택의 인기와 Node.js 고도화
-> MEAN(MongoDB, Express.js, AngularJS, Node.js)이나 MERN(MongoDB, Express.js, React, Node.js) 스택과 같이 아예 API 서버 자체도 자바스크립트로 구현하는 구조가 인기

### 새로운 패러다임의 웹 서비스를 향한 요구

폭발적인 기술의 발전으로 프로세스나 메모리 등 하드웨어 성능 발전을 거듭
=> 웹 페이지를 불러오는 데 필요한 부담을 일정 부분 사용자에게 전가하더라도 사용자의 기기나 인터넷 환경이 더 빠르게 발전
=> 웹 애플리케이션에서 제공하는 자바스크립트 리소스의 크기와 수 모두 증가하기 시작

웹 페이지 속도는 개선이 될까?

사용자의 디바이스가 크기도 커지고 개수도 더욱 많아진 자바스크립트 리소스를 효율적으로 처리하고 있을까?

=> 모바일에서 웹 페이지 로딩은 여전히 20초로 오래 걸림
=> 모바일에서 사용자가 웹에 어떤 액션을 취하고 싶다면 15초 이상을 대기

=> 자바스크립트 파싱을 위해 CPU 소비하는 시간이 증가
(그만큼 자바스크립트에서 처리해야하는 코드의 절대적인 양이 증가)
=> 코드 양 증가에 따라 시간도 증가
(웹 사이드 방문자들은 생각보다 많은 시간을 로딩에 소비)

<br />

과거 웹 보다 현재의 웹의 기능은 엄청 발전했으며, 사용자의 기기 인터넷 속도등 웹 전반을 이루는 환경이 크게 개선됨에도,
**로딩 속도는 별 차이없거나 속도가 더 느리다**
